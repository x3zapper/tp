<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="generator" content="MarkBind 6.0.2">
    <meta name="viewport" content="width=device-width, initial-scale=1"><title>CustomerRelationBook - Developer Guide - AddressBook Level-3</title> <link rel="stylesheet" href="/tp/markbind/css/bootstrap.min.css"> <link rel="stylesheet" href="/tp/markbind/fontawesome/css/all.min.css"> <link rel="stylesheet" href="/tp/markbind/glyphicons/css/bootstrap-glyphicons.min.css"><link rel="stylesheet" href="/tp/markbind/css/codeblock-light.min.css"><link rel="stylesheet" href="/tp/markbind/css/markbind.min.css"><link rel="stylesheet" href="/tp/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css"><link rel="stylesheet" href="/tp/plugins/markbind-plugin-tree/markbind-plugin-tree.css">
    
  <link rel="stylesheet" href="/tp/stylesheets/main.css">
<link rel="icon" href="/tp/images/SeEduLogo.png"></head>
<script>
  const baseUrl = '/tp'
</script>
<body  data-bs-spy="scroll" data-bs-target="#mb-page-nav" data-bs-offset="100" >
<div id="app"><!--[--><header sticky><div data-v-2dc82f13><nav class="navbar navbar-expand-md d-print-none navbar-dark bg-dark" data-v-2dc82f13><div class="container-fluid" data-v-2dc82f13><div class="navbar-left" data-v-2dc82f13><!--[--><a href="/tp/index.html" title="Home" class="navbar-brand">CustomerRelationBook</a><!--]--></div><div class="navbar-default" data-v-2dc82f13><ul class="navbar-nav me-auto mt-2 mt-lg-0" data-v-2dc82f13><!--[--> <li><a href="/tp/index.html" class="nav-link">Home</a></li> <li><a href="/tp/UserGuide.html" class="nav-link">User Guide</a></li> <li><a href="/tp/DeveloperGuide.html" class="nav-link">Developer Guide</a></li> <li><a href="/tp/AboutUs.html" class="nav-link">About Us</a></li> <li><a href="https://github.com/AY2526S1-CS2103-F13-3/tp" target="_blank" class="nav-link"><span><span aria-hidden="true" class="fab fa-github"></span></span></a></li> <!--]--></ul></div><ul class="navbar-nav navbar-right" data-v-2dc82f13><!--[--><li><form class="navbar-form"><div style="position:relative;" class="dropdown" data-v-00e26d0a><!--[--><input value="" data-bs-toggle="dropdown" type="text" class="form-control" placeholder="Search" autocomplete="off" data-v-00e26d0a><div class="form-control placeholder-div-hidden" data-v-00e26d0a>Search</div><!--]--><ul class="dropdown-menu search-dropdown-menu dropdown-menu-hidden dropdown-menu-end" data-v-00e26d0a><!--[--><!--]--></ul></div></form></li><!--]--></ul></div></nav><div style="display:none;" class="lower-navbar-container" data-v-2dc82f13><!--[--><!----><!----><!--]--></div></div></header> <div id="flex-body"><nav id="site-nav" data-v-6b1b63d2><!--[--><div class="site-nav-top"><div class="fw-bold mb-2" style="font-size:1.25rem;">Site Map</div></div> <div class="nav-component slim-scroll"><div class="site-nav-root"><!--[--><ul class="site-nav-list site-nav-list-root" data-v-6b1b63d2><!--[--><li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/index.html">Home</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html">User Guide</a> <div class="site-nav-dropdown-btn-container"><i class="site-nav-dropdown-btn-icon site-nav-rotate-icon" onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"><li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#quick-start">Quick Start</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#features">Features</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#faq">FAQ</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#known-issues">Known Issues</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/UserGuide.html#faq">Command Summary</a></div></li></ul></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html">Developer Guide</a> <div class="site-nav-dropdown-btn-container"><i class="site-nav-dropdown-btn-icon site-nav-rotate-icon" onclick="handleSiteNavClick(this.parentNode.parentNode, false); event.stopPropagation();"><span class="glyphicon glyphicon-menu-down" aria-hidden="true"></span></i></div></div><ul class="site-nav-dropdown-container site-nav-dropdown-container-open site-nav-list"><li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#acknowledgements">Acknowledgements</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#setting-up-getting-started">Setting Up</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#design">Design</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#implementation">Implementation</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#documentation-logging-testing-configuration-dev-ops">Documentation, logging, testing, configuration, dev-ops</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-requirements">Appendix: Requirements</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-instructions-for-manual-testing">Appendix: Instructions for manual testing</a></div></li> <li><div class="site-nav-default-list-item site-nav-list-item-1" onclick="handleSiteNavClick(this)"><a href="/tp/DeveloperGuide.html#appendix-planned-enhancements">Appendix: Planned enhancements</a></div></li></ul></li> <li><div class="site-nav-default-list-item site-nav-list-item-0" onclick="handleSiteNavClick(this)"><a href="/tp/AboutUs.html">About Us</a></div></li><!--]--><!--v-if--></ul><!--]--></div></div><!--]--><!--v-if--></nav> <div id="content-wrapper"><h1 id="customerrelationbook-developer-guide">CustomerRelationBook Developer Guide<a class="fa fa-anchor" href="#customerrelationbook-developer-guide" onclick="event.stopPropagation()"></a></h1> <div class="page-nav-print d-none d-print-block"></div> <hr> <h2 id="acknowledgements"><strong>Acknowledgements</strong><a class="fa fa-anchor" href="#acknowledgements" onclick="event.stopPropagation()"></a></h2> <p>This project is based on the AddressBook-Level3 project created by the <a href="https://se-education.org">SE-EDU initiative</a>.</p> <ul><li>For the detailed documentation of the <code class="hljs inline no-lang">AddressBook-Level3</code> project, see the <a href="https://se-education.org/addressbook-level3">Address Book Product Website</a>.</li> <li>This project is a part of the se-education.org initiative. If you would like to contribute code to this project, see <a href="https://se-education.org/#contributing-to-se-edu">se-education.org</a> for more info.</li> <li>Libraries used: <a href="https://openjfx.io/">JavaFX</a>, <a href="https://github.com/FasterXML/jackson">Jackson</a>, <a href="https://github.com/junit-team/junit5">JUnit5</a></li></ul> <hr> <h2 id="setting-up-getting-started"><strong>Setting up, getting started</strong><a class="fa fa-anchor" href="#setting-up-getting-started" onclick="event.stopPropagation()"></a></h2> <p>Refer to the guide <a href="/tp/SettingUp.html"><em>Setting up and getting started</em></a>.</p> <hr> <h2 id="design"><strong>Design</strong><a class="fa fa-anchor" href="#design" onclick="event.stopPropagation()"></a></h2> <h3 id="architecture">Architecture<a class="fa fa-anchor" href="#architecture" onclick="event.stopPropagation()"></a></h3> <span class="image-wrapper"><img src="/tp/diagrams/ArchitectureDiagram.png" width="280" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <em><strong>Architecture Diagram</strong></em> given above explains the high-level design of the App.</p> <p>Given below is a quick overview of main components and how they interact with each other.</p> <p><strong>Main components of the architecture</strong></p> <p><strong><code class="hljs inline no-lang">Main</code></strong> (consisting of classes <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/Main.java"><code class="hljs inline no-lang">Main</code></a> and <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/MainApp.java"><code class="hljs inline no-lang">MainApp</code></a>) is in charge of the app launch and shut down.</p> <ul><li>At app launch, it initializes the other components in the correct sequence, and connects them up with each other.</li> <li>At shut down, it shuts down the other components and invokes cleanup methods where necessary.</li></ul> <p>The bulk of the app&#39;s work is done by the following four components:</p> <ul><li><a href="#ui-component"><strong><code class="hljs inline no-lang">UI</code></strong></a>: The UI of the App.</li> <li><a href="#logic-component"><strong><code class="hljs inline no-lang">Logic</code></strong></a>: The command executor.</li> <li><a href="#model-component"><strong><code class="hljs inline no-lang">Model</code></strong></a>: Holds the data of the App in memory.</li> <li><a href="#storage-component"><strong><code class="hljs inline no-lang">Storage</code></strong></a>: Reads data from, and writes data to, the hard disk.</li></ul> <p><a href="#common-classes"><strong><code class="hljs inline no-lang">Commons</code></strong></a> represents a collection of classes used by multiple other components.</p> <p><strong>How the architecture components interact with each other</strong></p> <p>The <em>Sequence Diagram</em> below shows how the components interact with each other for the scenario where the user issues the command <code class="hljs inline no-lang">delete 1</code>.</p> <span class="image-wrapper"><img src="/tp/diagrams/ArchitectureSequenceDiagram.png" width="574" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>Each of the four main components (also shown in the diagram above),</p> <ul><li>defines its <em>API</em> in an <code class="hljs inline no-lang">interface</code> with the same name as the Component.</li> <li>implements its functionality using a concrete <code class="hljs inline no-lang">{Component Name}Manager</code> class (which follows the corresponding API <code class="hljs inline no-lang">interface</code> mentioned in the previous point.</li></ul> <p>For example, the <code class="hljs inline no-lang">Logic</code> component defines its API in the <code class="hljs inline no-lang">Logic.java</code> interface and implements its functionality using the <code class="hljs inline no-lang">LogicManager.java</code> class which follows the <code class="hljs inline no-lang">Logic</code> interface. Other components interact with a given component through its interface rather than the concrete class (reason: to prevent outside component&#39;s being coupled to the implementation of a component), as illustrated in the (partial) class diagram below.</p> <span class="image-wrapper"><img src="/tp/diagrams/ComponentManagers.png" width="300" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The sections below give more details of each component.</p> <h3 id="ui-component">UI component<a class="fa fa-anchor" href="#ui-component" onclick="event.stopPropagation()"></a></h3> <p>The <strong>API</strong> of this component is specified in <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/ui/Ui.java"><code class="hljs inline no-lang">Ui.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/UiClassDiagram.png" alt="Structure of the UI Component" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The UI consists of a <code class="hljs inline no-lang">MainWindow</code> that is made up of parts e.g.<code class="hljs inline no-lang">CommandBox</code>, <code class="hljs inline no-lang">ResultDisplay</code>, <code class="hljs inline no-lang">PersonListPanel</code>, <code class="hljs inline no-lang">StatusBarFooter</code> etc. All these, including the <code class="hljs inline no-lang">MainWindow</code>, inherit from the abstract <code class="hljs inline no-lang">UiPart</code> class which captures the commonalities between classes that represent parts of the visible GUI.</p> <p>The <code class="hljs inline no-lang">UI</code> component uses the JavaFx UI framework. The layout of these UI parts are defined in matching <code class="hljs inline no-lang">.fxml</code> files that are in the <code class="hljs inline no-lang">src/main/resources/view</code> folder. For example, the layout of the <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/ui/MainWindow.java"><code class="hljs inline no-lang">MainWindow</code></a> is specified in <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/resources/view/MainWindow.fxml"><code class="hljs inline no-lang">MainWindow.fxml</code></a></p> <p>The <code class="hljs inline no-lang">UI</code> component,</p> <ul><li>executes user commands using the <code class="hljs inline no-lang">Logic</code> component.</li> <li>listens for changes to <code class="hljs inline no-lang">Model</code> data so that the UI can be updated with the modified data.</li> <li>keeps a reference to the <code class="hljs inline no-lang">Logic</code> component, because the <code class="hljs inline no-lang">UI</code> relies on the <code class="hljs inline no-lang">Logic</code> to execute commands.</li> <li>depends on some classes in the <code class="hljs inline no-lang">Model</code> component, as it displays <code class="hljs inline no-lang">Person</code> object residing in the <code class="hljs inline no-lang">Model</code>.</li></ul> <h4 id="updating-the-help-window">Updating the Help Window<a class="fa fa-anchor" href="#updating-the-help-window" onclick="event.stopPropagation()"></a></h4> <p>The help window displays a list of available commands with usage details. To update the command list:</p> <ol><li><strong>Locate the FXML file</strong>: Navigate to <code class="hljs inline no-lang">src/main/resources/view/HelpWindow.fxml</code></li> <li><strong>Find the command list section</strong>: Look for the <code class="hljs inline no-lang">ScrollPane</code> with <code class="hljs inline no-lang">id=&quot;help-command-scroll&quot;</code> containing a <code class="hljs inline no-lang">VBox</code> with <code class="hljs inline no-lang">id=&quot;help-command-list&quot;</code></li> <li><strong>Add/modify commands</strong>: Each command is represented by a <code class="hljs inline no-lang">VBox</code> with <code class="hljs inline no-lang">styleClass=&quot;command-section&quot;</code>. The structure includes:
<ul><li>Command title (Label with <code class="hljs inline no-lang">styleClass=&quot;command-title&quot;</code>)</li> <li>Command description (one or more Labels with <code class="hljs inline no-lang">styleClass=&quot;command-description&quot;</code>)</li> <li>Usage format (Label showing the command syntax)</li></ul></li> <li><strong>Alternate styling</strong>: Use <code class="hljs inline no-lang">command-section-odd</code> and <code class="hljs inline no-lang">command-section-even</code> for alternating background colors</li> <li><strong>Update window settings</strong>: The help window size and position are persisted in <code class="hljs inline no-lang">GuiSettings</code>. Default dimensions are:
<ul><li>Width: 600px (minimum: 450px)</li> <li>Height: 500px (minimum: 400px)</li></ul></li></ol> <p>Example command entry structure:</p> <pre><code class="hljs xml"><span><span class="hljs-tag">&lt;<span class="hljs-name">VBox</span> <span class="hljs-attr">spacing</span>=<span class="hljs-string">&quot;4.0&quot;</span> <span class="hljs-attr">styleClass</span>=<span class="hljs-string">&quot;command-section, command-section-odd&quot;</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">children</span>&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">styleClass</span>=<span class="hljs-string">&quot;command-title&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;command_name&quot;</span> <span class="hljs-attr">...</span> /&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">styleClass</span>=<span class="hljs-string">&quot;command-description&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Brief description&quot;</span> <span class="hljs-attr">...</span> /&gt;</span>
</span><span>    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">styleClass</span>=<span class="hljs-string">&quot;command-description&quot;</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Usage: command_name PARAMS&quot;</span> <span class="hljs-attr">...</span> /&gt;</span>
</span><span>  <span class="hljs-tag">&lt;/<span class="hljs-name">children</span>&gt;</span>
</span><span>  <span class="hljs-tag">&lt;<span class="hljs-name">padding</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">padding</span>&gt;</span>
</span><span><span class="hljs-tag">&lt;/<span class="hljs-name">VBox</span>&gt;</span>
</span></code></pre><p><strong>Help Window Behavior:</strong></p> <p>The help window automatically handles minimization state:</p> <ul><li>When the help window is minimized and the user triggers the help command (via <code class="hljs inline no-lang">F1</code>, help menu, or <code class="hljs inline no-lang">help</code> command), the window will automatically restore from its minimized state and regain focus.</li> <li>This is implemented in the <code class="hljs inline no-lang">HelpWindow#show()</code> and <code class="hljs inline no-lang">HelpWindow#focus()</code> methods, which check if the window is iconified and restore it before showing or focusing.</li> <li>The help message label at the bottom uses text wrapping to prevent URL truncation at minimum window width.</li> <li>The &quot;Copy URL&quot; button has a fixed width to prevent truncation.</li></ul> <h3 id="logic-component">Logic component<a class="fa fa-anchor" href="#logic-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/logic/Logic.java"><code class="hljs inline no-lang">Logic.java</code></a></p> <p>Here&#39;s a (partial) class diagram of the <code class="hljs inline no-lang">Logic</code> component:</p> <span class="image-wrapper"><img src="/tp/diagrams/LogicClassDiagram.png" width="550" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The sequence diagram below illustrates the interactions within the <code class="hljs inline no-lang">Logic</code> component, taking <code class="hljs inline no-lang">execute(&quot;delete 1&quot;)</code> API call as an example.</p> <span class="image-wrapper"><img src="/tp/diagrams/DeleteSequenceDiagram.png" alt="Interactions Inside the Logic Component for the `delete 1` Command" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> The lifeline for <code class="hljs inline no-lang">DeleteCommandParser</code> should end at the destroy marker (X) but due to a limitation of PlantUML, the lifeline continues till the end of diagram.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>How the <code class="hljs inline no-lang">Logic</code> component works:</p> <ol><li>When <code class="hljs inline no-lang">Logic</code> is called upon to execute a command, it is passed to an <code class="hljs inline no-lang">AddressBookParser</code> object which in turn creates a parser that matches the command (e.g., <code class="hljs inline no-lang">DeleteCommandParser</code>) and uses it to parse the command.</li> <li>This results in a <code class="hljs inline no-lang">Command</code> object (more precisely, an object of one of its subclasses e.g., <code class="hljs inline no-lang">DeleteCommand</code>) which is executed by the <code class="hljs inline no-lang">LogicManager</code>.</li> <li>The command can communicate with the <code class="hljs inline no-lang">Model</code> when it is executed (e.g. to delete a person).<br>
Note that although this is shown as a single step in the diagram above (for simplicity), in the code it can take several interactions (between the command object and the <code class="hljs inline no-lang">Model</code>) to achieve.</li> <li>The result of the command execution is encapsulated as a <code class="hljs inline no-lang">CommandResult</code> object which is returned back from <code class="hljs inline no-lang">Logic</code>.</li></ol> <p>Here are the other classes in <code class="hljs inline no-lang">Logic</code> (omitted from the class diagram above) that are used for parsing a user command:</p> <span class="image-wrapper"><img src="/tp/diagrams/ParserClasses.png" width="600" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>How the parsing works:</p> <ul><li>When called upon to parse a user command, the <code class="hljs inline no-lang">AddressBookParser</code> class creates an <code class="hljs inline no-lang">XYZCommandParser</code> (<code class="hljs inline no-lang">XYZ</code> is a placeholder for the specific command name e.g., <code class="hljs inline no-lang">AddCommandParser</code>) which uses the other classes shown above to parse the user command and create a <code class="hljs inline no-lang">XYZCommand</code> object (e.g., <code class="hljs inline no-lang">AddCommand</code>) which the <code class="hljs inline no-lang">AddressBookParser</code> returns back as a <code class="hljs inline no-lang">Command</code> object.</li> <li>All <code class="hljs inline no-lang">XYZCommandParser</code> classes (e.g., <code class="hljs inline no-lang">AddCommandParser</code>, <code class="hljs inline no-lang">DeleteCommandParser</code>, ...) inherit from the <code class="hljs inline no-lang">Parser</code> interface so that they can be treated similarly where possible e.g, during testing.</li></ul> <h3 id="model-component">Model component<a class="fa fa-anchor" href="#model-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/model/Model.java"><code class="hljs inline no-lang">Model.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/ModelClassDiagram.png" width="450" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <code class="hljs inline no-lang">Model</code> component,</p> <ul><li>stores the contact list data i.e., all <code class="hljs inline no-lang">Person</code> objects (which are contained in a <code class="hljs inline no-lang">UniquePersonList</code> object).</li> <li>stores the currently &#39;selected&#39; <code class="hljs inline no-lang">Person</code> objects (e.g., results of a search query) as a separate <em>filtered</em> list which is exposed to outsiders as an unmodifiable <code class="hljs inline no-lang">ObservableList&lt;Person&gt;</code> that can be &#39;observed&#39; e.g. the UI can be bound to this list so that the UI automatically updates when the data in the list change.</li> <li>stores a <code class="hljs inline no-lang">UserPref</code> object that represents the user’s preferences. This is exposed to the outside as a <code class="hljs inline no-lang">ReadOnlyUserPref</code> objects.</li> <li>does not depend on any of the other three components (as the <code class="hljs inline no-lang">Model</code> represents data entities of the domain, they should make sense on their own without depending on other components)</li></ul> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> An alternative (arguably, a more OOP) model is given below. It has a <code class="hljs inline no-lang">Tag</code> list in the <code class="hljs inline no-lang">AddressBook</code>, which <code class="hljs inline no-lang">Person</code> references. This allows <code class="hljs inline no-lang">AddressBook</code> to only require one <code class="hljs inline no-lang">Tag</code> object per unique tag, instead of each <code class="hljs inline no-lang">Person</code> needing their own <code class="hljs inline no-lang">Tag</code> objects.<br></p> <span class="image-wrapper"><img src="/tp/diagrams/BetterModelClassDiagram.png" width="450" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <h3 id="storage-component">Storage component<a class="fa fa-anchor" href="#storage-component" onclick="event.stopPropagation()"></a></h3> <p><strong>API</strong> : <a href="https://github.com/AY2526S1-CS2103-F13-3/tp/tree/master/src/main/java/seedu/address/storage/Storage.java"><code class="hljs inline no-lang">Storage.java</code></a></p> <span class="image-wrapper"><img src="/tp/diagrams/StorageClassDiagram.png" width="550" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <code class="hljs inline no-lang">Storage</code> component,</p> <ul><li>can save both contact list data and user preference data in JSON format, and read them back into corresponding objects.</li> <li>inherits from both <code class="hljs inline no-lang">AddressBookStorage</code> and <code class="hljs inline no-lang">UserPrefStorage</code>, which means it can be treated as either one (if only the functionality of only one is needed).</li> <li>depends on some classes in the <code class="hljs inline no-lang">Model</code> component (because the <code class="hljs inline no-lang">Storage</code> component&#39;s job is to save/retrieve objects that belong to the <code class="hljs inline no-lang">Model</code>)</li></ul> <h3 id="common-classes">Common classes<a class="fa fa-anchor" href="#common-classes" onclick="event.stopPropagation()"></a></h3> <p>Classes used by multiple components are in the <code class="hljs inline no-lang">seedu.address.commons</code> package.</p> <hr> <h2 id="implementation"><strong>Implementation</strong><a class="fa fa-anchor" href="#implementation" onclick="event.stopPropagation()"></a></h2> <p>This section describes some noteworthy details on how certain features are implemented.</p> <hr> <h3 id="filter-feature">Filter feature<a class="fa fa-anchor" href="#filter-feature" onclick="event.stopPropagation()"></a></h3> <p>The filter command allows for the user to filter their contacts based on specified tags (up to 10).</p> <h4 id="feature-overview">Feature Overview<a class="fa fa-anchor" href="#feature-overview" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">filter</code> command filters and lists all persons in the contact list whose tags contain all of the specified keywords.
Tag matching is <strong>case-sensitive</strong>.
For example, entering <code class="hljs inline no-lang">filter friend</code> will display only the contacts with the tag “friend”.</p> <h4 id="implementation-2">Implementation<a class="fa fa-anchor" href="#implementation-2" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">FilterCommand</code> feature is implemented using the <strong>Command design pattern</strong>, similar to other commands in the Logic component.</p> <p>When the user executes the command:</p> <ol><li>The <code class="hljs inline no-lang">FilterCommandParser</code> parses the user input into individual tag keywords.</li> <li>A <code class="hljs inline no-lang">TagContainsKeywordsPredicate</code> object is created using these keywords.</li> <li>A <code class="hljs inline no-lang">FilterCommand</code> is constructed with this predicate and executed.</li> <li>Inside the <code class="hljs inline no-lang">execute(Model model)</code> method, the model’s <code class="hljs inline no-lang">updateFilteredPersonList(predicate)</code> is called.</li> <li>The UI automatically refreshes to display only persons who match the predicate condition.</li></ol> <h4 id="main-classes-involved">Main Classes Involved<a class="fa fa-anchor" href="#main-classes-involved" onclick="event.stopPropagation()"></a></h4> <ul><li><code class="hljs inline no-lang">FilterCommand</code></li> <li><code class="hljs inline no-lang">FilterCommandParser</code></li> <li><code class="hljs inline no-lang">TagContainsKeywordsPredicate</code></li> <li><code class="hljs inline no-lang">Model</code> (interface)</li> <li><code class="hljs inline no-lang">ModelManager</code> (concrete implementation)</li></ul> <h4 id="key-code-snippet">Key Code Snippet<a class="fa fa-anchor" href="#key-code-snippet" onclick="event.stopPropagation()"></a></h4> <pre><code class="hljs java"><span><span class="hljs-meta">@Override</span>
</span><span><span class="hljs-function"><span class="hljs-keyword">public</span> CommandResult <span class="hljs-title">execute</span><span class="hljs-params">(Model model)</span> </span>{
</span><span>    requireNonNull(model);
</span><span>    model.updateFilteredPersonList(predicate);
</span><span>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> CommandResult(
</span><span>        String.format(Messages.MESSAGE_PERSONS_LISTED_OVERVIEW, model.getFilteredPersonList().size()));
</span><span>}
</span></code></pre><h4 id="class-diagram">Class Diagram<a class="fa fa-anchor" href="#class-diagram" onclick="event.stopPropagation()"></a></h4> <p>The class diagram below illustrates the main classes involved in the <code class="hljs inline no-lang">FilterCommand</code> feature and their relationships.</p> <span class="image-wrapper"><img src="/tp/diagrams/FilterClassDiagram.png" alt="FilterClassDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="parsing-logic">Parsing Logic<a class="fa fa-anchor" href="#parsing-logic" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">FilterCommandParser</code> is responsible for parsing the user input for the <code class="hljs inline no-lang">filter</code> command and creating a corresponding <code class="hljs inline no-lang">FilterCommand</code> object.</p> <p><strong>Steps of Parsing Logic:</strong></p> <ol><li><p><strong>Trim and validate input</strong></p> <ul><li>The parser first removes leading and trailing whitespace from the input string.</li> <li>If the input is empty, a <code class="hljs inline no-lang">ParseException</code> is thrown, indicating invalid command format.</li></ul></li> <li><p><strong>Split input into keywords</strong></p> <ul><li>The remaining string is split by whitespace to obtain individual tag keywords.</li> <li>If more than 10 tags are provided, a <code class="hljs inline no-lang">ParseException</code> is thrown to enforce the tag limit.</li></ul></li> <li><p><strong>Validate each tag</strong></p> <ul><li>Each keyword is checked against the <code class="hljs inline no-lang">Tag.isValidTagName()</code> method.</li> <li>Invalid tags (non-alphanumeric) trigger a <code class="hljs inline no-lang">ParseException</code> with a helpful error message.</li></ul></li> <li><p><strong>Create Predicate</strong></p> <ul><li>A <code class="hljs inline no-lang">TagContainsKeywordsPredicate</code> object is instantiated with the validated list of tags.</li></ul></li> <li><p><strong>Return FilterCommand</strong></p> <ul><li>A new <code class="hljs inline no-lang">FilterCommand</code> is created using the predicate and returned for execution.</li></ul></li></ol> <h4 id="tagcontainskeywordspredicate">TagContainsKeywordsPredicate<a class="fa fa-anchor" href="#tagcontainskeywordspredicate" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">TagContainsKeywordsPredicate</code> class implements the <code class="hljs inline no-lang">Predicate&lt;Person&gt;</code> interface and is responsible for <strong>testing whether a person contains all of the specified tags</strong>.</p> <p><strong>Responsibilities:</strong></p> <ul><li>Encapsulates the list of tag keywords used for filtering.</li> <li>Provides a <code class="hljs inline no-lang">test(Person person)</code> method that returns <code class="hljs inline no-lang">true</code> if the person contains <strong>all tags</strong> in the keyword list.</li> <li>Supports <strong>case-sensitive matching</strong> for tags.</li> <li>Provides a <code class="hljs inline no-lang">getTags()</code> method to retrieve the list of keywords, which can be used for displaying messages to the user.</li></ul> <h4 id="sequence-diagram">Sequence Diagram<a class="fa fa-anchor" href="#sequence-diagram" onclick="event.stopPropagation()"></a></h4> <p>The sequence diagram below illustrates the interactions between the user, logic, parser, command, and model when executing the <code class="hljs inline no-lang">filter</code> command. Using an example of command &quot;filter friend VIP&quot;.</p> <span class="image-wrapper"><img src="/tp/diagrams/FilterSequenceDiagram.png" alt="FilterSequenceDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <hr> <h3 id="find-feature-with-multiple-search-modes">Find feature with multiple search modes<a class="fa fa-anchor" href="#find-feature-with-multiple-search-modes" onclick="event.stopPropagation()"></a></h3> <p>The find command allows users to search for contacts by name using three different search modes: relaxed (default), strict, and fuzzy. Each mode provides different matching behavior to suit various search scenarios.</p> <h4 id="implementation-3">Implementation<a class="fa fa-anchor" href="#implementation-3" onclick="event.stopPropagation()"></a></h4> <p>The find feature is implemented through three main components:</p> <ol><li><strong>FindCommandParser</strong> - Parses user input and extracts search mode and keywords</li> <li><strong>FindCommand</strong> - Executes the search based on the parsed predicate</li> <li><strong>NameContainsKeywordsPredicate</strong> - Implements the matching logic for each mode</li></ol> <span class="image-wrapper"><img src="/tp/diagrams/FindParserClassDiagram.png" alt="FindParserClassDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="parsing-search-modes">Parsing search modes<a class="fa fa-anchor" href="#parsing-search-modes" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">FindCommandParser</code> supports flexible syntax where the mode flag <code class="hljs inline no-lang">s/MODE</code> can be placed <strong>either</strong> at the beginning (before keywords) <strong>or</strong> at the end (after keywords) of the command, but not both:</p> <ul><li><code class="hljs inline no-lang">find s/1 alex</code> - Mode flag at beginning (before keywords)</li> <li><code class="hljs inline no-lang">find alex s/1</code> - Mode flag at end (after keywords)</li></ul> <p><strong>Mode values:</strong></p> <ul><li><code class="hljs inline no-lang">s/0</code> - Relaxed mode (default): Partial substring matching</li> <li><code class="hljs inline no-lang">s/1</code> - Strict mode: Full word matching only</li> <li><code class="hljs inline no-lang">s/2</code> - Fuzzy mode: Returns up to 5 closest matches using Levenshtein distance</li></ul> <p><strong>Parsing logic:</strong></p> <ol><li><p><strong>Mode flag at beginning:</strong> If arguments start with <code class="hljs inline no-lang">s/</code>, <code class="hljs inline no-lang">extractSearchModeFromPrefix()</code> is called:</p> <ul><li>Splits arguments by first whitespace</li> <li>Extracts first mode value (e.g., &quot;1&quot; from &quot;s/1&quot;)</li> <li>Remaining text becomes keywords</li> <li>Any subsequent <code class="hljs inline no-lang">s/MODE</code> patterns in the remaining text are treated as keywords (not as mode flags)</li></ul></li> <li><p><strong>Mode flag at end:</strong> Otherwise, <code class="hljs inline no-lang">extractSearchModeFromSuffix()</code> is called:</p> <ul><li>Uses <code class="hljs inline no-lang">ArgumentTokenizer</code> to find all <code class="hljs inline no-lang">s/</code> occurrences</li> <li>If multiple mode flags exist, <strong>last value wins</strong> via <code class="hljs inline no-lang">getValue(PREFIX_SEARCH_MODE)</code></li> <li>Preamble (text before mode flags) becomes keywords</li> <li>All <code class="hljs inline no-lang">s/MODE</code> patterns except the last one are treated as keywords</li></ul></li></ol> <p><strong>Example parsing scenarios:</strong></p> <div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead><tr><th>Command</th> <th>Mode Used</th> <th>Keywords</th> <th>Notes</th></tr></thead> <tbody><tr><td><code class="hljs inline no-lang">find alex s/1</code></td> <td>Strict (<code class="hljs inline no-lang">s/1</code>)</td> <td><code class="hljs inline no-lang">[&quot;alex&quot;]</code></td> <td>Mode flag at end: last mode wins</td></tr> <tr><td><code class="hljs inline no-lang">find s/2 alex</code></td> <td>Fuzzy (<code class="hljs inline no-lang">s/2</code>)</td> <td><code class="hljs inline no-lang">[&quot;alex&quot;]</code></td> <td>Mode flag at beginning: uses first mode</td></tr> <tr><td><code class="hljs inline no-lang">find alex s/0 s/1 s/2</code></td> <td>Fuzzy (<code class="hljs inline no-lang">s/2</code>)</td> <td><code class="hljs inline no-lang">[&quot;alex&quot;]</code></td> <td>Mode flags at end: last mode wins, others become keywords</td></tr> <tr><td><code class="hljs inline no-lang">find s/1 alex s/2</code></td> <td>Strict (<code class="hljs inline no-lang">s/1</code>)</td> <td><code class="hljs inline no-lang">[&quot;alex&quot;, &quot;s/2&quot;]</code></td> <td>Mode flag at beginning: only first recognized, <code class="hljs inline no-lang">s/2</code> becomes keyword</td></tr></tbody></table></div><h4 id="search-mode-behaviors">Search mode behaviors<a class="fa fa-anchor" href="#search-mode-behaviors" onclick="event.stopPropagation()"></a></h4> <p>The <code class="hljs inline no-lang">FindCommand#execute()</code> method checks the predicate mode and delegates to either <code class="hljs inline no-lang">FindCommand#executeNormalSearch()</code> for relaxed and strict modes, or <code class="hljs inline no-lang">FindCommand#executeFuzzySearch()</code> for fuzzy mode.</p> <p><strong>Relaxed Mode (s/0 - Default):</strong></p> <p>The <code class="hljs inline no-lang">NameContainsKeywordsPredicate#test()</code> performs partial substring matching by checking if the lowercase name contains the lowercase keyword. For example, <code class="hljs inline no-lang">find Yeo</code> matches &quot;Alex Yeoh&quot;, &quot;Yeong&quot;, or &quot;George&quot; (contains &quot;eo&quot;).</p> <p><strong>Strict Mode (s/1):</strong></p> <p>Uses <code class="hljs inline no-lang">StringUtil#containsWordIgnoreCase()</code> to perform full word matching by splitting the name into words and checking for exact matches. The implementation splits the sentence by whitespace and uses a stream to check if any word matches the keyword (case-insensitive). For example, <code class="hljs inline no-lang">find Yeoh s/1</code> matches &quot;Alex Yeoh&quot; but NOT &quot;Yeohng&quot; or &quot;Yeo&quot;.</p> <p><strong>Fuzzy Mode (s/2):</strong></p> <p>The <code class="hljs inline no-lang">FindCommand#executeFuzzySearch()</code> method ranks all persons by their minimum Levenshtein distance to the keywords using <code class="hljs inline no-lang">FindCommand#rankPersonsByDistance()</code>, which sorts persons by distance in ascending order and limits results to the top 5 matches. Results are unordered in the UI.</p> <p><strong>Important Note on Multi-Keyword Fuzzy Search:</strong> The fuzzy search compares each word in a person&#39;s name individually against each keyword and returns the minimum distance found across all comparisons. This means when using multiple keywords (e.g., <code class="hljs inline no-lang">find s/2 Jason Lim</code>), the search performs an OR operation on individual word matches rather than matching the full phrase. For example, a contact named &quot;Jason&quot; will have distance 0 to the keyword &quot;Jason&quot;, and a contact named &quot;Jason Lim A A&quot; will also have distance 0 (matching &quot;Jason&quot; or &quot;Lim&quot; individually). This can lead to unexpected results where shorter names rank equally with longer names that contain the same words. Fuzzy search is most effective with single keywords for typo tolerance.</p> <h4 id="levenshtein-distance-algorithm">Levenshtein Distance Algorithm<a class="fa fa-anchor" href="#levenshtein-distance-algorithm" onclick="event.stopPropagation()"></a></h4> <p>The fuzzy search mode uses the Levenshtein distance algorithm to measure similarity between strings. The Levenshtein distance is the minimum number of single-character edits (insertions, deletions, or substitutions) required to change one string into another.</p> <p>The algorithm is implemented in <code class="hljs inline no-lang">StringUtil#getLevenshteinDistance()</code> using dynamic programming with a 2D matrix approach:</p> <ol><li>A matrix <code class="hljs inline no-lang">dp[i][j]</code> is created where <code class="hljs inline no-lang">i</code> and <code class="hljs inline no-lang">j</code> represent positions in the two strings</li> <li>Base cases are initialized: <code class="hljs inline no-lang">dp[i][0] = i</code> (delete all characters from s1) and <code class="hljs inline no-lang">dp[0][j] = j</code> (insert all characters from s2)</li> <li>For each cell, if characters match, no operation is needed: <code class="hljs inline no-lang">dp[i][j] = dp[i-1][j-1]</code></li> <li>Otherwise, the minimum cost of three operations is taken: substitution <code class="hljs inline no-lang">dp[i-1][j-1]</code>, deletion <code class="hljs inline no-lang">dp[i-1][j]</code>, or insertion <code class="hljs inline no-lang">dp[i][j-1]</code>, each plus 1</li> <li>The final value <code class="hljs inline no-lang">dp[len1][len2]</code> gives the minimum edit distance</li></ol> <p><strong>How fuzzy matching uses Levenshtein distance:</strong></p> <p>The <code class="hljs inline no-lang">NameContainsKeywordsPredicate#getMinimumDistance()</code> method calculates the minimum distance for each person by:</p> <ol><li>Splitting the person&#39;s name into individual words</li> <li>Comparing each word against all keywords using <code class="hljs inline no-lang">StringUtil#getLevenshteinDistance()</code></li> <li>Returning the smallest distance found</li></ol> <p>This distance is then used by <code class="hljs inline no-lang">FindCommand#rankPersonsByDistance()</code> to sort all persons by distance and select the top 5 closest matches using a stream with <code class="hljs inline no-lang">Comparator.comparingInt()</code> and <code class="hljs inline no-lang">limit(FUZZY_RESULT_LIMIT)</code> where <code class="hljs inline no-lang">FUZZY_RESULT_LIMIT = 5</code>.</p> <p>For example, comparing &quot;Alek&quot; to &quot;Alex&quot; results in a distance of 1 (one substitution: &#39;k&#39; → &#39;x&#39;). The matrix computation produces:</p> <div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead><tr><th></th> <th></th> <th>a</th> <th>l</th> <th>e</th> <th>x</th></tr></thead> <tbody><tr><td></td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td></tr> <tr><td>a</td> <td>1</td> <td>0</td> <td>1</td> <td>2</td> <td>3</td></tr> <tr><td>l</td> <td>2</td> <td>1</td> <td>0</td> <td>1</td> <td>2</td></tr> <tr><td>e</td> <td>3</td> <td>2</td> <td>1</td> <td>0</td> <td>1</td></tr> <tr><td>k</td> <td>4</td> <td>3</td> <td>2</td> <td>1</td> <td>1</td></tr></tbody></table></div><p>The final distance is 1, making &quot;Alek&quot; a close match that would appear in fuzzy search results.</p> <p>The <code class="hljs inline no-lang">NameContainsKeywordsPredicate</code> defines <code class="hljs inline no-lang">FUZZY_MATCH_THRESHOLD = 2</code> for filtering during the <code class="hljs inline no-lang">test()</code> method, though in fuzzy mode execution, the top 5 closest matches are returned regardless of their distance.</p> <h4 id="design-considerations">Design considerations:<a class="fa fa-anchor" href="#design-considerations" onclick="event.stopPropagation()"></a></h4> <p><strong>Aspect: Mode flag position handling:</strong></p> <ul><li><p><strong>Alternative 1 (current choice):</strong> Supports both prefix and suffix positions.</p> <ul><li>Pros: Flexible syntax, user-friendly for different typing patterns.</li> <li>Cons: More complex parsing logic, potential ambiguity with multiple flags.</li></ul></li> <li><p><strong>Alternative 2:</strong> Require mode flag at fixed position (e.g., always at end).</p> <ul><li>Pros: Simpler parsing, no ambiguity.</li> <li>Cons: Less flexible, may not match user intuition.</li></ul></li></ul> <p><strong>Aspect: Multiple mode flag resolution:</strong></p> <ul><li><p><strong>Alternative 1 (current choice):</strong> Last mode wins (when not at beginning), first mode wins (when at beginning).</p> <ul><li>Pros: Predictable behavior, documented in user guide.</li> <li>Cons: May confuse users who accidentally type multiple flags.</li></ul></li> <li><p><strong>Alternative 2:</strong> Throw error on multiple mode flags.</p> <ul><li>Pros: Prevents ambiguity, forces correct input.</li> <li>Cons: Less forgiving, requires user to fix command.</li></ul></li></ul> <p><strong>Aspect: Fuzzy search result limit:</strong></p> <ul><li><p><strong>Alternative 1 (current choice):</strong> Fixed limit of 5 results.</p> <ul><li>Pros: Prevents overwhelming user with too many results, fast processing.</li> <li>Cons: May miss relevant matches if more than 5 similar names exist.</li></ul></li> <li><p><strong>Alternative 2:</strong> Configurable result limit.</p> <ul><li>Pros: User can adjust based on needs.</li> <li>Cons: Added complexity, may impact performance with large limits.</li></ul></li> <li><p><strong>Alternative 3 (future improvement):</strong> Smart threshold-based matching instead of fixed limit.</p> <ul><li>Implementation: Use an intelligent algorithm to dynamically determine the similarity threshold and show all matches that meet it, rather than limiting to exactly 5 results. The threshold adapts based on the quality and distribution of matches found.</li> <li>Pros: More intuitive results - shows all close matches without arbitrary cutoffs. Better handles cases with many similar names or very few close matches. Adapts to different search scenarios automatically.</li> <li>Cons: Result count varies, which may be unpredictable for users. More complex algorithm required.</li></ul></li></ul> <hr> <h3 id="sort-feature">Sort feature<a class="fa fa-anchor" href="#sort-feature" onclick="event.stopPropagation()"></a></h3> <p>The sort command allows the user to change the sort ordering of the conctact list displayed.
Class diagram:</p> <span class="image-wrapper"><img src="/tp/diagrams/SortClassDiagram.png" alt="SortClassDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="implementation-4">Implementation<a class="fa fa-anchor" href="#implementation-4" onclick="event.stopPropagation()"></a></h4> <p>Similar to other commands, the Sort feature has a parser and a command, in:</p> <ul><li><code class="hljs inline no-lang">SortCommand</code></li> <li><code class="hljs inline no-lang">SortCommandParser</code>
Which updates the <code class="hljs inline no-lang">ModelManager</code>&#39;s <code class="hljs inline no-lang">sortedPersons</code> list which is the list that the UI calls upon to show using the <code class="hljs inline no-lang">getSortedPersonList()</code> function of <code class="hljs inline no-lang">ModelManager</code>.
To clarify, <code class="hljs inline no-lang">sortedPersons</code> is a <code class="hljs inline no-lang">SortedList</code> which the comparator can be updated with <code class="hljs inline no-lang">updateSortComparator(Comparator&lt;Person&gt;)</code> function of <code class="hljs inline no-lang">ModelManager</code>.</li></ul> <p>It is to note that <code class="hljs inline no-lang">SortCommand</code> only has four types of Comparators defined as static properties</p> <ul><li><code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_NAME_ASCENDING</code></li> <li><code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_NAME_DESCENDING</code></li> <li><code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_DATE_ADDED_ASCENDING</code></li> <li><code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_DATE_ADDED_DESCENDING</code>
These four comparators are the only comparators that <code class="hljs inline no-lang">SortCommandParser</code> can instantiate a <code class="hljs inline no-lang">SortCommand</code> with.
For example: <code class="hljs inline no-lang">new SortCommand(SortCommand.COMPARATOR_SORT_PERSONS_BY_DATE_ADDED_ASCENDING)</code> and as such the only four comparators that <code class="hljs inline no-lang">sortedPersons</code> can be updated with.</li></ul> <h4 id="parsing">Parsing<a class="fa fa-anchor" href="#parsing" onclick="event.stopPropagation()"></a></h4> <p><code class="hljs inline no-lang">SortCommandParser</code> has two and only two, mandatory flags that require an accompanying value</p> <ul><li><code class="hljs inline no-lang">st/</code> - short for &quot;sort type&quot; which values can only be
<ul><li>&quot;dateadded&quot; - for sorting by the <code class="hljs inline no-lang">dateAdded</code> property of <code class="hljs inline no-lang">Person</code> which is a <code class="hljs inline no-lang">DateAdded</code> class. Note that the <code class="hljs inline no-lang">DateAdded</code> class uses the <code class="hljs inline no-lang">Instant</code> datatype as the backing value</li> <li>&quot;name&quot; - for sorting by the <code class="hljs inline no-lang">name</code> property of <code class="hljs inline no-lang">Person</code> which is a <code class="hljs inline no-lang">Name</code> class. Note that the <code class="hljs inline no-lang">Name</code> class uses the <code class="hljs inline no-lang">String</code> datatype as the backing value</li></ul></li> <li><code class="hljs inline no-lang">so/</code> - short for &quot;sort order&quot; which values can only be
<ul><li>&quot;asc&quot; - short for ascending order</li> <li>&quot;dsc&quot; - short for descending order</li></ul></li></ul> <p>Said flags can be in any order as <code class="hljs inline no-lang">SortCommandParser</code> uses <code class="hljs inline no-lang">ArgumentTokenizer</code> to find occurrences.</p> <p><strong>Comparator Details:</strong>
It is of note that <code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_DATE_ADDED_DESCENDING</code> and <code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_NAME_DESCENDING</code> are just <code class="hljs inline no-lang">.reversed()</code> versions of their ascending versions.
Although user&#39;s cannot directly edit a <code class="hljs inline no-lang">Person</code>&#39;s <code class="hljs inline no-lang">dateAdded</code> through the <code class="hljs inline no-lang">edit</code> command, a user can edit the <code class="hljs inline no-lang">dateAdded</code> value through the JSON so that multiple contacts have the same <code class="hljs inline no-lang">dateAdded</code> value.
As this would cause some issues with sorting, <code class="hljs inline no-lang">COMPARATOR_SORT_PERSONS_BY_DATE_ADDED_ASCENDING</code> has a tie-breaker which uses the <code class="hljs inline no-lang">Person</code>&#39;s <code class="hljs inline no-lang">name</code>.
Since CRB currently does not allow for <code class="hljs inline no-lang">Person</code>s of the same <code class="hljs inline no-lang">name</code> (contact list gets reset), this is sufficient.</p> <hr> <h3 id="command-box-history-feature">Command box history feature<a class="fa fa-anchor" href="#command-box-history-feature" onclick="event.stopPropagation()"></a></h3> <p>This section documents the command-history feature used by <code class="hljs inline no-lang">CommandBox</code>.</p> <h4 id="feature-overview-2">Feature Overview<a class="fa fa-anchor" href="#feature-overview-2" onclick="event.stopPropagation()"></a></h4> <p>The command-history feature provides a terminal-like experience where previously executed commands can be navigated using the Up and Down arrow keys. It supports:</p> <ul><li>Browsing older commands with <code class="hljs inline no-lang">UP</code> and newer commands with <code class="hljs inline no-lang">DOWN</code>.</li> <li>Preserving the currently typed (partial) input when the user begins browsing history and restoring it when the user navigates back to the most recent position (so the user can continue editing).</li> <li>Preventing duplicate consecutive history entries (the same command repeated in succession).</li> <li>Limiting the history size (to 100 entries) to avoid unbounded memory growth.</li></ul> <p>Example interaction flow:</p> <ul><li>Type <code class="hljs inline no-lang">add Alice</code> and press <code class="hljs inline no-lang">Enter</code> -&gt; command is executed and stored in history.</li> <li>Type <code class="hljs inline no-lang">del</code> (partial), press <code class="hljs inline no-lang">UP</code> -&gt; previous command shown, partial <code class="hljs inline no-lang">del</code> saved.</li> <li>Press <code class="hljs inline no-lang">DOWN</code> until out of history -&gt; <code class="hljs inline no-lang">del</code> restored for continued editing.</li></ul> <h4 id="implementation-5">Implementation<a class="fa fa-anchor" href="#implementation-5" onclick="event.stopPropagation()"></a></h4> <p>The feature is split into two components:</p> <ol><li><code class="hljs inline no-lang">CommandBox</code> (UI layer)</li></ol> <ul><li>Handles user keyboard input and UI updates (TextField contents &amp; caret position).</li> <li>Delegates history navigation to <code class="hljs inline no-lang">CommandHistory</code>.</li> <li>Uses a <code class="hljs inline no-lang">CommandExecutor</code> functional interface (provided by <code class="hljs inline no-lang">MainWindow</code>) to execute commands.</li></ul> <ol start="2"><li><code class="hljs inline no-lang">CommandHistory</code> (logic layer / helper class)</li></ol> <ul><li>Encapsulates history storage (a <code class="hljs inline no-lang">List&lt;String&gt;</code>), the browsing index, and a saved partial command.</li> <li>Exposes:
<ul><li><code class="hljs inline no-lang">boolean add(String commandText)</code> - store a new command, trims history and avoids duplicates.</li> <li><code class="hljs inline no-lang">String getPrevious(String currentInput)</code> - return older command; save current partial input when browsing starts.</li> <li><code class="hljs inline no-lang">String getNext(String currentInput)</code> - return newer command or restore saved partial input when leaving history.</li> <li><code class="hljs inline no-lang">void reset()</code> - clear browsing state.</li> <li><code class="hljs inline no-lang">boolean isEmpty()</code> - check if history is empty.</li></ul></li></ul> <p>Flow when user presses Up/Down arrow keys:</p> <ol><li><code class="hljs inline no-lang">CommandBox</code> intercepts <code class="hljs inline no-lang">KeyEvent</code> for <code class="hljs inline no-lang">UP</code>/<code class="hljs inline no-lang">DOWN</code>.</li> <li><code class="hljs inline no-lang">CommandBox</code> calls <code class="hljs inline no-lang">commandHistory.getPrevious(commandTextField.getText())</code> or <code class="hljs inline no-lang">commandHistory.getNext(commandTextField.getText())</code>.</li> <li><code class="hljs inline no-lang">CommandHistory</code> returns the appropriate string.</li> <li><code class="hljs inline no-lang">CommandBox</code> sets the <code class="hljs inline no-lang">TextField</code> text and positions the caret at the end.</li></ol> <p>Flow when user presses Enter:</p> <ol><li><code class="hljs inline no-lang">CommandBox.handleCommandEntered() </code> calls <code class="hljs inline no-lang">commandHistory.add(commandText)</code>.</li> <li><code class="hljs inline no-lang">commandHistory.add()</code> checks if:</li> <li>New command is a duplicate of latest entry, if so do not add</li> <li>History is full, if so remove the oldest entry</li> <li><code class="hljs inline no-lang">commandHistory.add()</code> internally calls <code class="hljs inline no-lang">reset()</code> to ensure browsing state is cleared.</li></ol> <h4 id="list-access-safety">List Access Safety<a class="fa fa-anchor" href="#list-access-safety" onclick="event.stopPropagation()"></a></h4> <ul><li><code class="hljs inline no-lang">getPrevious</code> and <code class="hljs inline no-lang">getNext</code> perform empty-history checks first and return safely without indexing.</li> <li><code class="hljs inline no-lang">historyIndex</code> is always maintained within the range <code class="hljs inline no-lang">HISTORY_INACTIVE</code> (−1) or valid list indices 0 to <code class="hljs inline no-lang">history.size()-1</code>.</li> <li>Note: The code assumes single-threaded use on the JavaFX Application Thread; if accessed from other threads concurrently, external synchronization is required.</li></ul> <h4 id="class-diagram-2">Class Diagram<a class="fa fa-anchor" href="#class-diagram-2" onclick="event.stopPropagation()"></a></h4> <span class="image-wrapper"><img src="/tp/diagrams/CommandHistoryClassDiagram.png" alt="CommandHistoryClassDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="sequence-diagram-navigation-up-down">Sequence Diagram - Navigation (Up/Down)<a class="fa fa-anchor" href="#sequence-diagram-navigation-up-down" onclick="event.stopPropagation()"></a></h4> <span class="image-wrapper"><img src="/tp/diagrams/CommandHistorySequenceDiagram_Navigation.png" alt="CommandHistoryNavigationSequenceDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="sequence-diagram-execute-enter">Sequence Diagram - Execute (Enter)<a class="fa fa-anchor" href="#sequence-diagram-execute-enter" onclick="event.stopPropagation()"></a></h4> <span class="image-wrapper"><img src="/tp/diagrams/CommandHistorySequenceDiagram_Execute.png" alt="CommandHistoryExecuteSequenceDiagram" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="possible-future-development-ideas">Possible Future Development Ideas<a class="fa fa-anchor" href="#possible-future-development-ideas" onclick="event.stopPropagation()"></a></h4> <ul><li>Persistence - Command history can be written to a save file when exiting the application and restored upon next launch</li></ul> <hr> <h2 id="documentation-logging-testing-configuration-dev-ops"><strong>Documentation, logging, testing, configuration, dev-ops</strong><a class="fa fa-anchor" href="#documentation-logging-testing-configuration-dev-ops" onclick="event.stopPropagation()"></a></h2> <ul><li><a href="/tp/Documentation.html">Documentation guide</a></li> <li><a href="/tp/Testing.html">Testing guide</a></li> <li><a href="/tp/Logging.html">Logging guide</a></li> <li><a href="/tp/Configuration.html">Configuration guide</a></li> <li><a href="/tp/DevOps.html">DevOps guide</a></li></ul> <hr> <h2 id="appendix-requirements"><strong>Appendix: Requirements</strong><a class="fa fa-anchor" href="#appendix-requirements" onclick="event.stopPropagation()"></a></h2> <h3 id="product-scope">Product scope<a class="fa fa-anchor" href="#product-scope" onclick="event.stopPropagation()"></a></h3> <p><strong>Target user profile</strong>:</p> <ul><li>IT startup founders or small business owners who handle client and vendor communication personally</li> <li>has a need to manage and categorize different types of contacts (potential clients, contracted clients, vendors)</li> <li>lacks experience in systematic contact management but wants to organize business relationships effectively</li> <li>prefer desktop apps over other types for data security and offline access</li> <li>can type fast and prefers typing to mouse interactions for efficiency</li> <li>is reasonably comfortable using CLI apps</li></ul> <p><strong>Value proposition</strong>: helps small business owners organize and categorize their client and vendor contacts more systematically than a typical mouse/GUI driven app, enabling better relationship management without the complexity of enterprise CRM systems</p> <h3 id="user-stories">User stories<a class="fa fa-anchor" href="#user-stories" onclick="event.stopPropagation()"></a></h3> <p>Priorities: High (must have) - <code class="hljs inline no-lang">* * *</code>, Medium (nice to have) - <code class="hljs inline no-lang">* *</code>, Low (unlikely to have) - <code class="hljs inline no-lang">*</code></p> <div class="table-responsive"><table class="markbind-table table table-bordered table-striped"><thead><tr><th>Priority</th> <th>As a …</th> <th>I want to …</th> <th>So that I can…</th></tr></thead> <tbody><tr><td><code class="hljs inline no-lang">* * *</code></td> <td>new user</td> <td>see usage instructions</td> <td>refer to instructions when I forget how to use the App</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>add a new person</td> <td>store contact details for future reference</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>edit contact information</td> <td>keep contact details up to date when they change</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>delete a person</td> <td>remove entries that I no longer need</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>find a person by name</td> <td>locate details of persons without having to go through the entire list</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>view all my contacts</td> <td>see an overview of all stored contacts</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>filter contacts by tags</td> <td>focus on specific groups like clients or vendors</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>clear all contacts</td> <td>start fresh with a clean contact list when needed</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>exit the application</td> <td>close the app when I&#39;m done using it</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>have my data automatically saved</td> <td>not lose my contact information when the app closes</td></tr> <tr><td><code class="hljs inline no-lang">* * *</code></td> <td>user</td> <td>use consistent commands</td> <td>interact with the app reliably and predictably</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>add notes to contacts</td> <td>remember important details or context about each person</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>edit notes for contacts</td> <td>update or remove notes as circumstances change</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>search with fuzzy matching</td> <td>find contacts even if I misspell their names</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>search with strict matching</td> <td>find only exact name matches when I know the full name</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>navigate command history</td> <td>quickly reuse previous commands without retyping them</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>sort my contacts by name</td> <td>view contacts in alphabetical order for easier browsing</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>sort by date added</td> <td>see my newest or oldest contacts first</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>add custom tags to contacts</td> <td>categorize them by type for better organization</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>international business owner</td> <td>store timezone information</td> <td>know what time it is for my contacts in different regions</td></tr> <tr><td><code class="hljs inline no-lang">* *</code></td> <td>user</td> <td>mark contacts as favorites</td> <td>quickly access my most important clients or vendors</td></tr> <tr><td><code class="hljs inline no-lang">*</code></td> <td>user</td> <td>backup my contact information</td> <td>restore my data in case I lose the current information</td></tr></tbody></table></div><h3 id="use-cases">Use cases<a class="fa fa-anchor" href="#use-cases" onclick="event.stopPropagation()"></a></h3> <p>(For all use cases below, the <strong>System</strong> is the CustomerRelationBook and the <strong>Actor</strong> is the <code class="hljs inline no-lang">user</code>, unless specified otherwise)</p> <p><strong>Use Case: UC01 - Add a New Contact</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User chooses to add a new contact.</p></li> <li><p>User enters contact details (e.g., name, phone, email, address).</p></li> <li><p>CustomerRelationBook parses the contact details.</p></li> <li><p>CustomerRelationBook validates each field details.</p></li> <li><p>CustomerRelationBook checks for duplicates.</p></li> <li><p>CustomerRelationBook saves the new contact and confirms successful addition.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>3a. User enters invalid data for any field.</p> <ul><li>3a1. CustomerRelationBook displays appropriate error message for the fields.</li> <li>3a2. User re-enters the corrected data.</li> <li>Steps 3a1–3a2 repeat until all data are valid.</li> <li>Use case resumes from step 4.</li></ul></li> <li><p>3b. User specified missing field or wrong field:</p> <ul><li>3b1. CustomerRelationBook displays error.</li> <li>3b2. CustomerRelationBook displays required field.</li> <li>3b3. User corrects the command.</li> <li>Steps repeat until all single-valued fields are specified correctly.</li> <li>Use case resumes from step 4.</li></ul></li> <li><p>4a. Duplicate contact detected.</p> <ul><li>4a1. CustomerRelationBook displays a console message indicating that the contact already exists.</li> <li>Use case ends.</li></ul></li></ul> <p><strong>Use case: UC02 - List Contacts</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to list all contact.</p></li> <li><p>CustomerRelationBook parses the command.</p></li> <li><p>CustomerRelationBook validates the command format.</p></li> <li><p>CustomerRelationBook retrieves all saved contacts.</p></li> <li><p>CustomerRelationBook displays all contacts.</p></li> <li><p>CustomerRelationBook displays a console message indicating the number of contacts displayed.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li>5a. No contacts stored in CustomerRelationBook
<ul><li>5a1. CustomerRelationBook will not display any contacts.</li> <li>5a2. CustomerRelationBook displays a console message indicating CustomerRelationBook is empty.</li> <li>Use case ends.</li></ul></li></ul> <p><strong>Use case: UC03 - Add Tags to Contact</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User includes tags when <u>adding a new contact (UC01).</u></p></li> <li><p>CustomerRelationBook parses the tag values.</p></li> <li><p>CustomerRelationBook validates the tag values.</p></li> <li><p>CustomerRelationBook associates valid tags with the contact.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li>3a. Tag value is invalid
<ul><li>3a1. CustomerRelationBook displays error message and requests for correction.</li> <li>3a2. User corrects or remove invalid tags.</li> <li>Steps 3a1-3a2 repeat until all tags are valid.</li> <li>Use case resumes from step 4.</li></ul></li></ul> <p><strong>Use case: UC04 - Filter Contacts by Tags</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to filter contacts with specified tags.</p></li> <li><p>CustomerRelationBook parses the tag values.</p></li> <li><p>CustomerRelationBook validates the tag values.</p></li> <li><p>CustomerRelationBook retrieves all contacts with the specified tags.</p></li> <li><p>CustomerRelationBook <u>lists these filtered contacts (UC02).</u></p></li> <li><p>CustomerRelationBook displays a console message indicating the number of filtered contacts displayed.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>3a. No tag provided in the command.</p> <ul><li>3a1. CustomerRelationBook displays an error message.</li> <li>Use case ends.</li></ul></li> <li><p>3b. Tag value is invalid.</p> <ul><li>3b1. CustomerRelationBook will display an error message and request for correction.</li> <li>3b2. User corrects the tag value.</li> <li>Step 3b1-3b2 repeats until all tags are valid.</li> <li>Use case resumes from step 4.</li></ul></li> <li><p>3c. More than 10 tags specified.</p> <ul><li>3c1. CustomerRelationBook will display an error message and request for correction.</li> <li>3c2. User corrects the command.</li> <li>Steps 3c1-3c2 repeats until tags are less than 10.</li> <li>Use case resumes from step 4.</li></ul></li> <li><p>4a. No contact matches the specified tags.</p> <ul><li>4a1. CustomerRelationBook will not display any contacts</li> <li>4a2. CustomerRelationBook will display a console message indicating no contacts found with the specified tags.</li> <li>Use case ends.</li></ul></li></ul> <p><strong>Use case: UC05 - Delete a person</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to list persons</p></li> <li><p>CustomerRelationBook shows a list of persons</p></li> <li><p>User requests to delete a specific person in the list</p></li> <li><p>CustomerRelationBook deletes the person</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>2a. The list is empty.</p> <ul><li>Use case ends.</li></ul></li> <li><p>3a. The given index is invalid.</p> <ul><li>3a1. CustomerRelationBook shows an error message.</li> <li>Use case resumes at step 2.</li></ul></li></ul> <p><strong>Use case: UC06 - Edit a Contact</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User <u>lists contacts (UC02)</u> or <u>finds contacts (UC08)</u>.</p></li> <li><p>CustomerRelationBook displays the list of contacts.</p></li> <li><p>User requests to edit a specific contact with new field values.</p></li> <li><p>CustomerRelationBook parses the edit command.</p></li> <li><p>CustomerRelationBook validates the index and field values.</p></li> <li><p>CustomerRelationBook updates the contact with new values.</p></li> <li><p>CustomerRelationBook confirms successful update.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>3a. No index provided.</p> <ul><li>3a1. CustomerRelationBook displays error message.</li> <li>Use case ends.</li></ul></li> <li><p>5a. The given index is invalid.</p> <ul><li>5a1. CustomerRelationBook displays error message.</li> <li>Use case resumes at step 3.</li></ul></li> <li><p>5b. No fields to edit provided.</p> <ul><li>5b1. CustomerRelationBook displays error message requiring at least one field.</li> <li>Use case resumes at step 3.</li></ul></li> <li><p>5c. Field value is invalid.</p> <ul><li>5c1. CustomerRelationBook displays error message for the specific field.</li> <li>5c2. User corrects the field value.</li> <li>Steps 5c1-5c2 repeat until all fields are valid.</li> <li>Use case resumes from step 6.</li></ul></li></ul> <p><strong>Use case: UC07 - Clear All Contacts</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to clear all contacts.</p></li> <li><p>CustomerRelationBook parses the command.</p></li> <li><p>CustomerRelationBook removes all contacts.</p></li> <li><p>CustomerRelationBook confirms successful clearing.</p> <p>Use case ends.</p></li></ol> <p><strong>Use case: UC08 - Find Contacts by Name</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to find contacts by name keywords.</p></li> <li><p>CustomerRelationBook parses the keywords and search mode.</p></li> <li><p>CustomerRelationBook validates the command format.</p></li> <li><p>CustomerRelationBook searches for contacts matching the keywords.</p></li> <li><p>CustomerRelationBook displays matching contacts.</p></li> <li><p>CustomerRelationBook displays a console message indicating the number of contacts found.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>2a. No keywords provided.</p> <ul><li>2a1. CustomerRelationBook displays error message.</li> <li>Use case ends.</li></ul></li> <li><p>2b. Invalid search mode specified.</p> <ul><li>2b1. CustomerRelationBook displays error message with valid modes.</li> <li>Use case resumes at step 1.</li></ul></li> <li><p>4a. No contacts match the keywords.</p> <ul><li>4a1. CustomerRelationBook displays empty list.</li> <li>4a2. CustomerRelationBook displays message indicating no contacts found.</li> <li>Use case ends.</li></ul></li></ul> <p><strong>Use case: UC09 - Sort Contacts</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to sort contacts by specified criteria.</p></li> <li><p>CustomerRelationBook parses sort type and sort order.</p></li> <li><p>CustomerRelationBook validates the sort parameters.</p></li> <li><p>CustomerRelationBook sorts the contact list accordingly.</p></li> <li><p>CustomerRelationBook displays sorted contacts.</p></li> <li><p>CustomerRelationBook confirms successful sorting.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>2a. Missing sort type or sort order.</p> <ul><li>2a1. CustomerRelationBook displays error message with required parameters.</li> <li>Use case ends.</li></ul></li> <li><p>3a. Invalid sort type specified.</p> <ul><li>3a1. CustomerRelationBook displays error message with valid sort types (dateadded, name).</li> <li>Use case resumes at step 1.</li></ul></li> <li><p>3b. Invalid sort order specified.</p> <ul><li>3b1. CustomerRelationBook displays error message with valid sort orders (asc, dsc).</li> <li>Use case resumes at step 1.</li></ul></li></ul> <p><strong>Use case: UC10 - Add or Edit Note for Contact</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User <u>lists contacts (UC02)</u> or <u>finds contacts (UC08)</u>.</p></li> <li><p>CustomerRelationBook displays the list of contacts.</p></li> <li><p>User requests to add/edit note for a specific contact.</p></li> <li><p>CustomerRelationBook parses the note command.</p></li> <li><p>CustomerRelationBook validates the index and note content.</p></li> <li><p>CustomerRelationBook updates the contact&#39;s note.</p></li> <li><p>CustomerRelationBook confirms successful note update.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li><p>3a. No index provided.</p> <ul><li>3a1. CustomerRelationBook displays error message.</li> <li>Use case ends.</li></ul></li> <li><p>5a. The given index is invalid.</p> <ul><li>5a1. CustomerRelationBook displays error message.</li> <li>Use case resumes at step 3.</li></ul></li> <li><p>5b. Note prefix missing.</p> <ul><li>5b1. CustomerRelationBook displays error message.</li> <li>Use case resumes at step 3.</li></ul></li> <li><p>5c. Empty note content (to delete note).</p> <ul><li>5c1. CustomerRelationBook removes the contact&#39;s note.</li> <li>5c2. CustomerRelationBook confirms note deletion.</li> <li>Use case ends.</li></ul></li></ul> <p><strong>Use case: UC11 - View Help</strong></p> <p><strong>MSS</strong></p> <ol><li><p>User requests to view help.</p></li> <li><p>CustomerRelationBook parses the help command.</p></li> <li><p>CustomerRelationBook opens help window.</p></li> <li><p>Help window displays all available commands with usage details.</p> <p>Use case ends.</p></li></ol> <p><strong>Extensions</strong></p> <ul><li>3a. Help window is already open but minimized.
<ul><li>3a1. The window will be automatically restored from its minimized state.</li> <li>Use case resumes at step 4.</li></ul></li></ul> <h3 id="non-functional-requirements">Non-Functional Requirements<a class="fa fa-anchor" href="#non-functional-requirements" onclick="event.stopPropagation()"></a></h3> <ol><li>Should work on any <em>mainstream OS</em> as long as it has Java <code class="hljs inline no-lang">17</code> or above installed.</li> <li>Should be able to hold up to 1000 persons without a noticeable sluggishness in performance for typical usage.</li> <li>A user with above average typing speed for regular English text (i.e. not code, not system admin commands) should be able to accomplish most of the tasks faster using commands than using the mouse.</li> <li>Backup (save to existing local storage file) and restore (read from existing local storage file with correct data format) operations must complete within 5 seconds for a large (1000) contact list size.</li> <li>Application startup time should not exceed 10 seconds on a machine with standard business laptop specifications (16GB ram, SSD storage, quad-core CPU)
In this case, application startup is from running it in bash to having the main UI window appear --&gt; i.e. we do not wait until the all the contacts are shown</li> <li>Memory usage should not exceed 300MB for normal usage (i.e. Each field should not be &gt; 30 characters, less than 30 contacts) on the maximum dataset size</li> <li>CRUD operations on <strong>each</strong> contact must be completed within 200ms under normal (0-30) dataset size</li> <li>Search and filtering operations across a large (1000) contact list size must return results within 300ms</li> <li>No external connectivity should be required, all features must be available offline</li></ol> <h3 id="glossary">Glossary<a class="fa fa-anchor" href="#glossary" onclick="event.stopPropagation()"></a></h3> <ul><li><strong>CLI</strong>: Command Line Interface - a text-based user interface used to interact with the application</li> <li><strong>Client</strong>: A person or organization that purchases goods or services from the business</li> <li><strong>Contact</strong>: A person whose information is stored in the contact list, which can be a client, vendor, or other business relationship</li> <li><strong>CRB</strong>: Customer Relations Book - the name of this application for managing business contacts</li> <li><strong>Filter</strong>: A feature that displays only contacts matching specified tag criteria</li> <li><strong>Mainstream OS</strong>: Windows, Linux, Unix, MacOS</li> <li><strong>Potential Client</strong>: A contact who may become a client in the future but has not yet made a purchase</li> <li><strong>Private contact detail</strong>: A contact detail that is not meant to be shared with others</li> <li><strong>Tag</strong>: A label used to categorize contacts (e.g., &quot;client&quot;, &quot;vendor&quot;, &quot;VIP&quot;)</li> <li><strong>Vendor</strong>: A person or organization that supplies goods or services to the business</li> <li><strong>CRM</strong>: Customer Relationship Management - a system that helps businesses manage and analyze their interactions and data with current and potential customers.</li> <li><strong>CRUD</strong>: Create, Read, Update, and Delete - the four fundamental operations used to interact with persistent storage like databases.</li> <li><strong>UTF-8</strong>: A character encoding system used to represent text on computers, able to encode every character in the Unicode standard using a variable number of bytes</li></ul> <hr> <h2 id="appendix-instructions-for-manual-testing"><strong>Appendix: Instructions for manual testing</strong><a class="fa fa-anchor" href="#appendix-instructions-for-manual-testing" onclick="event.stopPropagation()"></a></h2> <p>Given below are instructions to test the app manually.</p> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> These instructions only provide a starting point for testers to work on;
testers are expected to do more <em>exploratory</em> testing.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <h3 id="launch-and-shutdown">Launch and shutdown<a class="fa fa-anchor" href="#launch-and-shutdown" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Initial launch</p> <ol><li><p>Download the jar file and copy into an empty folder</p></li> <li><p>Double-click the jar file.<br>
Expected: Shows the GUI with a set of sample contacts. The window size may not be optimum.</p></li></ol></li> <li><p>Saving window preferences</p> <ol><li><p>Resize the window to an optimum size. Move the window to a different location. Close the window.</p></li> <li><p>Re-launch the app by double-clicking the jar file.<br>
Expected: The most recent window size and location is retained.</p></li></ol></li></ol> <h3 id="viewing-help">Viewing help<a class="fa fa-anchor" href="#viewing-help" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Opening the help window</p> <ol><li><p>Test case: <code class="hljs inline no-lang">help</code><br>
Expected: Help window opens showing scrollable list of all commands with usage details.</p></li> <li><p>Test case: Close help window and run <code class="hljs inline no-lang">help</code> again<br>
Expected: Help window reopens at the same size and position as before.</p></li> <li><p>Test case: Minimize help window and run <code class="hljs inline no-lang">help</code><br>
Expected: Help window remains minimized. User must manually restore it.</p></li></ol></li></ol> <h3 id="adding-a-person">Adding a person<a class="fa fa-anchor" href="#adding-a-person" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Adding a new contact</p> <ol><li><p>Test case: <code class="hljs inline no-lang">add n/John Doe p/98765432 e/johnd@example.com a/123 Street</code><br>
Expected: New contact added to the list. Success message displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">add n/John Doe p/98765432 e/johnd@example.com a/123 Street</code><br>
Expected: Error message indicating duplicate contact.</p></li> <li><p>Test case: <code class="hljs inline no-lang">add n/Jane p/1234567 e/invalid a/456 Road</code><br>
Expected: Error message indicating invalid email format.</p></li> <li><p>Test case: <code class="hljs inline no-lang">add n/Bob p/abc e/bob@example.com a/789 Ave</code><br>
Expected: Error message indicating invalid phone number.</p></li> <li><p>Test case: <code class="hljs inline no-lang">add p/12345678 e/test@example.com a/Address</code><br>
Expected: Error message indicating missing name field.</p></li></ol></li></ol> <h3 id="listing-all-persons">Listing all persons<a class="fa fa-anchor" href="#listing-all-persons" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Listing all contacts</p> <ol><li><p>Test case: <code class="hljs inline no-lang">list</code><br>
Expected: All contacts displayed. Message shows total number of contacts.</p></li> <li><p>Test case: <code class="hljs inline no-lang">list extra parameters</code><br>
Expected: All contacts displayed (extra parameters ignored).</p></li></ol></li></ol> <h3 id="editing-a-person">Editing a person<a class="fa fa-anchor" href="#editing-a-person" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Editing a contact while all persons are shown</p> <ol><li><p>Prerequisites: List all persons using <code class="hljs inline no-lang">list</code>. Multiple persons in the list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit 1 p/91234567 e/newemail@example.com</code><br>
Expected: First contact&#39;s phone and email updated. Success message displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit 2 t/</code><br>
Expected: Second contact&#39;s tags cleared. Success message displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit 1 nt/Important client</code><br>
Expected: First contact&#39;s note updated. Success message displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit 0 p/12345678</code><br>
Expected: Error message indicating invalid index.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit 1</code><br>
Expected: Error message indicating at least one field must be provided.</p></li> <li><p>Test case: <code class="hljs inline no-lang">edit x p/12345678</code> (where x exceeds list size)<br>
Expected: Error message indicating invalid index.</p></li></ol></li></ol> <h3 id="deleting-a-person">Deleting a person<a class="fa fa-anchor" href="#deleting-a-person" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Deleting a person while all persons are shown</p> <ol><li><p>Prerequisites: List all persons using <code class="hljs inline no-lang">list</code>. Multiple persons in the list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">delete 1</code><br>
Expected: First contact deleted. Details of deleted contact shown. Timestamp updated.</p></li> <li><p>Test case: <code class="hljs inline no-lang">delete 0</code><br>
Expected: Error message indicating invalid index. No person deleted.</p></li> <li><p>Test case: <code class="hljs inline no-lang">delete</code> (no index)<br>
Expected: Error message indicating invalid command format.</p></li> <li><p>Test case: <code class="hljs inline no-lang">delete x</code> (where x exceeds list size)<br>
Expected: Error message indicating invalid index.</p></li></ol></li></ol> <h3 id="finding-persons-by-name">Finding persons by name<a class="fa fa-anchor" href="#finding-persons-by-name" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Finding contacts by name</p> <ol><li><p>Prerequisites: Have contacts with various names in the contact list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">find alex</code><br>
Expected: Contacts with &quot;alex&quot; (case-insensitive, partial match) displayed. Count shown.</p></li> <li><p>Test case: <code class="hljs inline no-lang">find alex david</code><br>
Expected: Contacts matching &quot;alex&quot; OR &quot;david&quot; displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">find Yeoh s/1</code><br>
Expected: Only contacts with exact word &quot;Yeoh&quot; displayed (strict mode).</p></li> <li><p>Test case: <code class="hljs inline no-lang">find s/2 Alica</code><br>
Expected: Up to 5 closest matches to &quot;Alica&quot; displayed (fuzzy mode, tolerates typos).</p></li> <li><p>Test case: <code class="hljs inline no-lang">find</code><br>
Expected: Error message indicating keywords cannot be empty.</p></li> <li><p>Test case: <code class="hljs inline no-lang">find s/9 alex</code><br>
Expected: Error message indicating invalid search mode.</p></li></ol></li></ol> <h3 id="filtering-persons-by-tags">Filtering persons by tags<a class="fa fa-anchor" href="#filtering-persons-by-tags" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Filtering contacts by tags</p> <ol><li><p>Prerequisites: Have contacts with various tags in the contact list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">filter friends</code><br>
Expected: Only contacts with &quot;friends&quot; tag displayed (case-sensitive). Count shown.</p></li> <li><p>Test case: <code class="hljs inline no-lang">filter friends VIP</code><br>
Expected: Only contacts with BOTH &quot;friends&quot; AND &quot;VIP&quot; tags displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">filter</code><br>
Expected: Error message indicating invalid command format.</p></li> <li><p>Test case: <code class="hljs inline no-lang">filter @invalid</code><br>
Expected: Error message indicating invalid tag format (alphanumeric only).</p></li> <li><p>Test case: <code class="hljs inline no-lang">filter t1 t2 t3 t4 t5 t6 t7 t8 t9 t10 t11</code><br>
Expected: Error message indicating maximum 10 tags allowed.</p></li></ol></li></ol> <h3 id="sorting-persons">Sorting persons<a class="fa fa-anchor" href="#sorting-persons" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Sorting the contact list</p> <ol><li><p>Prerequisites: Have multiple contacts in the contact list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/name so/asc</code><br>
Expected: Contacts sorted alphabetically by name (ascending). Success message shown.</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/name so/dsc</code><br>
Expected: Contacts sorted alphabetically by name (descending).</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/dateadded so/asc</code><br>
Expected: Contacts sorted by date added (oldest first).</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/dateadded so/dsc</code><br>
Expected: Contacts sorted by date added (newest first).</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/name</code><br>
Expected: Error message indicating missing sort order.</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort so/asc</code><br>
Expected: Error message indicating missing sort type.</p></li> <li><p>Test case: <code class="hljs inline no-lang">sort st/invalid so/asc</code><br>
Expected: Error message indicating invalid sort type.</p></li></ol></li></ol> <h3 id="adding-or-editing-notes">Adding or editing notes<a class="fa fa-anchor" href="#adding-or-editing-notes" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Managing notes for contacts</p> <ol><li><p>Prerequisites: List all persons using <code class="hljs inline no-lang">list</code>. Multiple persons in the list.</p></li> <li><p>Test case: <code class="hljs inline no-lang">note 1 nt/Important client, needs follow-up</code><br>
Expected: Note added to first contact. Success message with note content displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">note 2 nt/</code><br>
Expected: Note removed from second contact. Success message displayed.</p></li> <li><p>Test case: <code class="hljs inline no-lang">note 0 nt/Some note</code><br>
Expected: Error message indicating invalid index.</p></li> <li><p>Test case: <code class="hljs inline no-lang">note 1</code><br>
Expected: Error message indicating note prefix required.</p></li> <li><p>Test case: <code class="hljs inline no-lang">note x nt/Some note</code> (where x exceeds list size)<br>
Expected: Error message indicating invalid index.</p></li></ol></li></ol> <h3 id="clearing-all-entries">Clearing all entries<a class="fa fa-anchor" href="#clearing-all-entries" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Clearing the contact list</p> <ol><li><p>Test case: <code class="hljs inline no-lang">clear</code><br>
Expected: All contacts removed. Success message displayed. Empty list shown.</p></li> <li><p>Test case: <code class="hljs inline no-lang">clear extra parameters</code><br>
Expected: All contacts removed (extra parameters ignored).</p></li></ol></li></ol> <h3 id="command-history-navigation">Command history navigation<a class="fa fa-anchor" href="#command-history-navigation" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Using arrow keys to navigate command history</p> <ol><li><p>Prerequisites: Execute several commands (e.g., <code class="hljs inline no-lang">list</code>, <code class="hljs inline no-lang">add n/Test p/12345678 e/test@test.com a/Test St</code>, <code class="hljs inline no-lang">find alex</code>).</p></li> <li><p>Test case: Press UP arrow key in command box<br>
Expected: Previous command (<code class="hljs inline no-lang">find alex</code>) appears in command box.</p></li> <li><p>Test case: Press UP arrow key again<br>
Expected: Command before that (<code class="hljs inline no-lang">add...</code>) appears.</p></li> <li><p>Test case: Press DOWN arrow key<br>
Expected: More recent command (<code class="hljs inline no-lang">find alex</code>) appears again.</p></li></ol></li></ol> <h3 id="saving-data">Saving data<a class="fa fa-anchor" href="#saving-data" onclick="event.stopPropagation()"></a></h3> <ol><li><p>Dealing with missing data files</p> <ol><li><p>Delete the <code class="hljs inline no-lang">data/addressbook.json</code> file from the application folder.</p></li> <li><p>Launch the application.<br>
Expected: Application starts with sample data loaded.</p></li></ol></li> <li><p>Dealing with corrupted data files</p> <ol><li><p>Open <code class="hljs inline no-lang">data/addressbook.json</code> in a text editor.</p></li> <li><p>Modify the file to make it invalid JSON (e.g., remove a closing brace).</p></li> <li><p>Launch the application.<br>
Expected: Application starts with empty data, corrupted file discarded.</p></li></ol></li> <li><p>Automatic saving</p> <ol><li><p>Add, edit, or delete a contact.</p></li> <li><p>Close the application without using <code class="hljs inline no-lang">exit</code> command.</p></li> <li><p>Relaunch the application.<br>
Expected: Changes are persisted, data is retained.</p></li></ol></li></ol> <hr> <h2 id="appendix-planned-enhancements"><strong>Appendix: Planned enhancements</strong><a class="fa fa-anchor" href="#appendix-planned-enhancements" onclick="event.stopPropagation()"></a></h2> <h3 id="scrollbar-support-for-individual-contact-cards">Scrollbar support for individual contact cards<a class="fa fa-anchor" href="#scrollbar-support-for-individual-contact-cards" onclick="event.stopPropagation()"></a></h3> <p><em>To be implemented in the future</em></p> <h3 id="better-support-for-special-characters-e-g-or-non-utf-8-characters-in-name-and-phone-number">Better support for special characters (e.g. /+, or non UTF-8 characters) in name and phone number<a class="fa fa-anchor" href="#better-support-for-special-characters-e-g-or-non-utf-8-characters-in-name-and-phone-number" onclick="event.stopPropagation()"></a></h3> <p><em>To be implemented in the future</em></p> <h3 id="better-bi-directional-scrolling-for-typists">Better bi-directional scrolling for typists<a class="fa fa-anchor" href="#better-bi-directional-scrolling-for-typists" onclick="event.stopPropagation()"></a></h3> <p><em>To be implemented in the future</em></p> <h3 id="data-archiving">Data archiving<a class="fa fa-anchor" href="#data-archiving" onclick="event.stopPropagation()"></a></h3> <p><em>To be implemented in the future</em></p> <h3 id="undo-redo-feature">Undo/redo feature<a class="fa fa-anchor" href="#undo-redo-feature" onclick="event.stopPropagation()"></a></h3> <h4 id="proposed-implementation">Proposed Implementation<a class="fa fa-anchor" href="#proposed-implementation" onclick="event.stopPropagation()"></a></h4> <p>The proposed undo/redo mechanism is facilitated by <code class="hljs inline no-lang">VersionedAddressBook</code>. It extends <code class="hljs inline no-lang">AddressBook</code> with an undo/redo history, stored internally as an <code class="hljs inline no-lang">addressBookStateList</code> and <code class="hljs inline no-lang">currentStatePointer</code>. Additionally, it implements the following operations:</p> <ul><li><code class="hljs inline no-lang">VersionedAddressBook#commit()</code> - Saves the current <code class="hljs inline no-lang">AddressBook</code> state in its history.</li> <li><code class="hljs inline no-lang">VersionedAddressBook#undo()</code> - Restores the previous <code class="hljs inline no-lang">AddressBook</code> state from its history.</li> <li><code class="hljs inline no-lang">VersionedAddressBook#redo()</code> - Restores a previously undone <code class="hljs inline no-lang">AddressBook</code> state from its history.</li></ul> <p>These operations are exposed in the <code class="hljs inline no-lang">Model</code> interface as <code class="hljs inline no-lang">Model#commitAddressBook()</code>, <code class="hljs inline no-lang">Model#undoAddressBook()</code> and <code class="hljs inline no-lang">Model#redoAddressBook()</code> respectively.</p> <p>Given below is an example usage scenario and how the undo/redo mechanism behaves at each step.</p> <p>Step 1. The user launches the application for the first time. The <code class="hljs inline no-lang">VersionedAddressBook</code> will be initialized with the initial <code class="hljs inline no-lang">AddressBook</code> state, and the <code class="hljs inline no-lang">currentStatePointer</code> pointing to that single <code class="hljs inline no-lang">AddressBook</code> state.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState0.png" alt="UndoRedoState0" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>Step 2. The user executes <code class="hljs inline no-lang">delete 5</code> command to delete the 5th person in the <code class="hljs inline no-lang">AddressBook</code>. The <code class="hljs inline no-lang">delete</code> command calls <code class="hljs inline no-lang">Model#commitAddressBook()</code>, causing the modified state of the <code class="hljs inline no-lang">AddressBook</code> after the <code class="hljs inline no-lang">delete 5</code> command executes to be saved in the <code class="hljs inline no-lang">addressBookStateList</code>, and the <code class="hljs inline no-lang">currentStatePointer</code> is shifted to the newly inserted <code class="hljs inline no-lang">AddressBook</code> state.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState1.png" alt="UndoRedoState1" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>Step 3. The user executes <code class="hljs inline no-lang">add n/David …</code> to add a new person. The <code class="hljs inline no-lang">add</code> command also calls <code class="hljs inline no-lang">Model#commitAddressBook()</code>, causing another modified <code class="hljs inline no-lang">AddressBook</code> state to be saved into the <code class="hljs inline no-lang">addressBookStateList</code>.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState2.png" alt="UndoRedoState2" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> If a command fails its execution, it will not call <code class="hljs inline no-lang">Model#commitAddressBook()</code>, so the <code class="hljs inline no-lang">AddressBook</code> state will not be saved into the <code class="hljs inline no-lang">addressBookStateList</code>.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>Step 4. The user now decides that adding the person was a mistake, and decides to undo that action by executing the <code class="hljs inline no-lang">undo</code> command. The <code class="hljs inline no-lang">undo</code> command will call <code class="hljs inline no-lang">Model#undoAddressBook()</code>, which will shift the <code class="hljs inline no-lang">currentStatePointer</code> once to the left, pointing it to the previous <code class="hljs inline no-lang">AddressBook</code> state, and restores the <code class="hljs inline no-lang">AddressBook</code> to that state.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState3.png" alt="UndoRedoState3" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> If the <code class="hljs inline no-lang">currentStatePointer</code> is at index 0, pointing to the initial CustomerRelationBook state, then there are no previous AddressBook states to restore. The <code class="hljs inline no-lang">undo</code> command uses <code class="hljs inline no-lang">Model#canUndoAddressBook()</code> to check if this is the case. If so, it will return an error to the user rather
than attempting to perform the undo.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>The following sequence diagram shows how an undo operation goes through the <code class="hljs inline no-lang">Logic</code> component:</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoSequenceDiagram-Logic.png" alt="UndoSequenceDiagram-Logic" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> The lifeline for <code class="hljs inline no-lang">UndoCommand</code> should end at the destroy marker (X) but due to a limitation of PlantUML, the lifeline reaches the end of diagram.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>Similarly, how an undo operation goes through the <code class="hljs inline no-lang">Model</code> component is shown below:</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoSequenceDiagram-Model.png" alt="UndoSequenceDiagram-Model" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The <code class="hljs inline no-lang">redo</code> command does the opposite - it calls <code class="hljs inline no-lang">Model#redoAddressBook()</code>, which shifts the <code class="hljs inline no-lang">currentStatePointer</code> once to the right, pointing to the previously undone state, and restores the <code class="hljs inline no-lang">AddressBook</code> to that state.</p> <div class="alert box-container seamless" style="" data-v-19514615><!--Icon and vertical divider for seamless header box--><!----><div class="header-and-body" data-v-19514615><!-- Header wrapper, not rendered if there is no header attribute --><!----><!-- Body wrapper --><div class="box-body-wrapper" data-v-19514615><!-- icon on the left, not shown if there is a header --><div class="icon-wrapper text-info" style="" data-v-19514615><!--[--><i class="fas fa-info" data-v-19514615></i><!--]--></div><!-- Icon -- content divider for seamless boxes without the header attribute --><div class="alert-info vertical-divider" aria-hidden="true" data-v-19514615></div><!-- Content wrapper --><div class="contents" style="" data-v-19514615><!--[--><p><strong>Note:</strong> If the <code class="hljs inline no-lang">currentStatePointer</code> is at index <code class="hljs inline no-lang">addressBookStateList.size() - 1</code>, pointing to the latest <code class="hljs inline no-lang">AddressBook</code> state, then there are no undone CustomerRelationBook states to restore. The <code class="hljs inline no-lang">redo</code> command uses <code class="hljs inline no-lang">Model#canRedoAddressBook()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the redo.</p><!--]--></div><!-- dismiss button on the right, not shown if there is a header --><!----></div></div></div> <p>Step 5. The user then decides to execute the command <code class="hljs inline no-lang">list</code>. Commands that do not modify the <code class="hljs inline no-lang">AddressBook</code>, such as <code class="hljs inline no-lang">list</code>, will usually not call <code class="hljs inline no-lang">Model#commitAddressBook()</code>, <code class="hljs inline no-lang">Model#undoAddressBook()</code> or <code class="hljs inline no-lang">Model#redoAddressBook()</code>. Thus, the <code class="hljs inline no-lang">addressBookStateList</code> remains unchanged.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState4.png" alt="UndoRedoState4" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>Step 6. The user executes <code class="hljs inline no-lang">clear</code>, which calls <code class="hljs inline no-lang">Model#commitAddressBook()</code>. Since the <code class="hljs inline no-lang">currentStatePointer</code> is not pointing at the end of the <code class="hljs inline no-lang">addressBookStateList</code>, all <code class="hljs inline no-lang">AddressBook</code> states after the <code class="hljs inline no-lang">currentStatePointer</code> will be purged. Reason: It no longer makes sense to redo the <code class="hljs inline no-lang">add n/David …</code> command. This is the behavior that most modern desktop applications follow.</p> <span class="image-wrapper"><img src="/tp/diagrams/UndoRedoState5.png" alt="UndoRedoState5" width="" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <p>The following activity diagram summarizes what happens when a user executes a new command:</p> <span class="image-wrapper"><img src="/tp/diagrams/CommitActivityDiagram.png" width="250" height="" loading="eager" class="img-fluid rounded"><span class="image-caption"><!--[--><!--]--></span></span> <h4 id="design-considerations-2">Design considerations:<a class="fa fa-anchor" href="#design-considerations-2" onclick="event.stopPropagation()"></a></h4> <p><strong>Aspect: How undo &amp; redo executes:</strong></p> <ul><li><p><strong>Alternative 1 (current choice):</strong> Saves the entire <code class="hljs inline no-lang">AddressBook</code>.</p> <ul><li>Pros: Easy to implement.</li> <li>Cons: May have performance issues in terms of memory usage.</li></ul></li> <li><p><strong>Alternative 2:</strong> Individual command knows how to undo/redo by
itself.</p> <ul><li>Pros: Will use less memory (e.g. for <code class="hljs inline no-lang">delete</code>, just save the person being deleted).</li> <li>Cons: We must ensure that the implementation of each individual command are correct.</li></ul></li></ul> <p><em>{more aspects and alternatives to be added}</em></p></div> <nav id="page-nav" data-v-6b1b63d2><!--[--><div class="nav-component slim-scroll"><nav id="mb-page-nav" class="nav nav-pills flex-column my-0 small no-flex-wrap" data-v-6b1b63d2><!--[--><a class="nav-link py-1" href="#customerrelationbook-developer-guide">CustomerRelationBook Developer Guide‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#acknowledgements">Acknowledgements‎</a> <a class="nav-link py-1" href="#setting-up-getting-started">Setting up, getting started‎</a> <a class="nav-link py-1" href="#design">Design‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#architecture">Architecture‎</a> <a class="nav-link py-1" href="#ui-component">UI component‎</a> <a class="nav-link py-1" href="#logic-component">Logic component‎</a> <a class="nav-link py-1" href="#model-component">Model component‎</a> <a class="nav-link py-1" href="#storage-component">Storage component‎</a> <a class="nav-link py-1" href="#common-classes">Common classes‎</a></nav> <a class="nav-link py-1" href="#implementation">Implementation‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#filter-feature">Filter feature‎</a> <a class="nav-link py-1" href="#find-feature-with-multiple-search-modes">Find feature with multiple search modes‎</a> <a class="nav-link py-1" href="#sort-feature">Sort feature‎</a> <a class="nav-link py-1" href="#command-box-history-feature">Command box history feature‎</a></nav> <a class="nav-link py-1" href="#documentation-logging-testing-configuration-dev-ops">Documentation, logging, testing, configuration, dev-ops‎</a> <a class="nav-link py-1" href="#appendix-requirements">Appendix: Requirements‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#product-scope">Product scope‎</a> <a class="nav-link py-1" href="#user-stories">User stories‎</a> <a class="nav-link py-1" href="#use-cases">Use cases‎</a> <a class="nav-link py-1" href="#non-functional-requirements">Non-Functional Requirements‎</a> <a class="nav-link py-1" href="#glossary">Glossary‎</a></nav> <a class="nav-link py-1" href="#appendix-instructions-for-manual-testing">Appendix: Instructions for manual testing‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#launch-and-shutdown">Launch and shutdown‎</a> <a class="nav-link py-1" href="#viewing-help">Viewing help‎</a> <a class="nav-link py-1" href="#adding-a-person">Adding a person‎</a> <a class="nav-link py-1" href="#listing-all-persons">Listing all persons‎</a> <a class="nav-link py-1" href="#editing-a-person">Editing a person‎</a> <a class="nav-link py-1" href="#deleting-a-person">Deleting a person‎</a> <a class="nav-link py-1" href="#finding-persons-by-name">Finding persons by name‎</a> <a class="nav-link py-1" href="#filtering-persons-by-tags">Filtering persons by tags‎</a> <a class="nav-link py-1" href="#sorting-persons">Sorting persons‎</a> <a class="nav-link py-1" href="#adding-or-editing-notes">Adding or editing notes‎</a> <a class="nav-link py-1" href="#clearing-all-entries">Clearing all entries‎</a> <a class="nav-link py-1" href="#command-history-navigation">Command history navigation‎</a> <a class="nav-link py-1" href="#saving-data">Saving data‎</a></nav> <a class="nav-link py-1" href="#appendix-planned-enhancements">Appendix: Planned enhancements‎</a> <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap"><a class="nav-link py-1" href="#scrollbar-support-for-individual-contact-cards">Scrollbar support for individual contact cards‎</a> <a class="nav-link py-1" href="#better-support-for-special-characters-e-g-or-non-utf-8-characters-in-name-and-phone-number">Better support for special characters (e.g. /+, or non UTF-8 characters) in name and phone number‎</a> <a class="nav-link py-1" href="#better-bi-directional-scrolling-for-typists">Better bi-directional scrolling for typists‎</a> <a class="nav-link py-1" href="#data-archiving">Data archiving‎</a> <a class="nav-link py-1" href="#undo-redo-feature">Undo/redo feature‎</a></nav></nav><!--]--><!--v-if--></nav></div><!--]--><!--v-if--></nav> <div class="scroll-top-button fa-lg d-print-none" style="display:none;bottom:2%;right:2%;position:fixed;" aria-hidden="true"><!--[--><i class="fas fa-arrow-circle-up"></i><!--]--></div></div> <footer><div class="text-center"><small>[<span><strong>Powered by</strong></span> <img src="https://markbind.org/favicon.ico" width="30"> <a href="https://markbind.org/">MarkBind 6.0.2</a>, generated on Tue, 4 Nov 2025, 10:39:38 GMT+8]</small></div></footer><!--]--></div>
</body><script src="/tp/markbind/js/bootstrap-utility.min.js"></script>
<script src="/tp/markbind/js/polyfill.min.js"></script>
<script src="/tp/markbind/js/vue.global.prod.min.js"></script>
<script src="/tp/markbind/js/markbind.min.js"></script>
<script src="DeveloperGuide.page-vue-render.js"></script>
<script>
  MarkBind.setupWithSearch()
</script>
</html>
